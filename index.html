<!DOCTYPE html>
<html lang="en">

<head>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script defer src="https://unpkg.com/p5"></script>
    <script defer src="https://unpkg.com/p5.collide2d"></script>
    <script defer src="https://cdn.rawgit.com/bit101/quicksettings/master/quicksettings.js"></script>
    <script defer src="https://cdn.rawgit.com/bitcraftlab/p5.gui/master/libraries/p5.gui.js"></script>
    <script src="./Dragon.js"></script>
    <script src="./Wall.js"></script>
    <style> body {padding: 0; margin: 0;} canvas {vertical-align: top;} </style>
</head>

<body>
    <script>
        let params = {
            headScale: 1,
            headScaleMin: 0.8,
            headScaleMax: 1.3,
            headScaleStep: 0.05,

            wingScale: 1,
            wingScaleMin: 0.8,
            wingScaleMax: 1.3,
            wingScaleStep: 0.05,

            tailScale: 1,
            tailScaleMin: 0.8,
            tailScaleMax: 1.3,
            tailScaleStep: 0.05,

            debug: false
        };
        
        var gui;
        let dragons = []
        let walls = []
        
        function setup() {
            collideDebug(true);
            createCanvas(windowWidth, windowHeight)
            var gui = createGui('Dragon Stats');
            gui.addObject(params);

            walls[0] = new Wall(100, 1000, 1000, 1000, true)
            walls[1] = new Wall(100, 1000, 100, 100, true)
            walls[2] = new Wall(1000, 1000, 1000, 100, true)
            walls[3] = new Wall(100, 100, 1000, 100, true)
            dragons[0] = new Dragon(400, 400,Math.round(Math.random() * 255),Math.round(Math.random() * 255),Math.round(Math.random() * 255)) 
            dragons[1] = new Dragon(600, 600,Math.round(Math.random() * 255),Math.round(Math.random() * 255),Math.round(Math.random() * 255)) 
            dragons[2] = new Dragon(400, 600,Math.round(Math.random() * 255),Math.round(Math.random() * 255),Math.round(Math.random() * 255)) 
            dragons[3] = new Dragon(600, 400,Math.round(Math.random() * 255),Math.round(Math.random() * 255),Math.round(Math.random() * 255)) 
        }

        function draw() {
            background(200)
            for(let i = 0; i < dragons.length; i++) {
                dragons[i].draw(params.headScale, params.wingScale, params.tailScale, params.debug)
                for(let j = 0; j < walls.length; j++) {
                    dragons[i].checkIntercept(walls[j])
                    
                }
                dragons[i].move()
            }
            for(let i = 0; i < walls.length; i++) {
                walls[i].draw()
            }
        }

        windowResized = function () {
            resizeCanvas(windowWidth, windowHeight);
        };

    </script>
</body>

</html>